# flowcouner
Code for ionization flow counter device
# !!!
Основная логика находится в файле "flow_counter_main_with_ui.ino".
Важно что бы файл "RI_logo_image_120x120.h" был в ОДНОЙ и той же папке что и "flow_counter_main_with_ui.ino".

# Как это работает?
## Инициализация
  1. Лого 10 секунд
  2. Основной рабочий экран. 
  3. По умолчанию энкодером редактируется скорость вращения насоса (PWM), если не редактируем EXPOS.
  4. Удержание кнопки энкодера — вкл/выкл помпы, об этом свидетельствует индикация на экране (красный/зеленый).
  5. Двойной клик  кнопки энкодера — переключаем на редактирование EXPOS (единица = 1 секунда). Одинарный клик - выйти из режима.
  6. Измерение происходит за время экспозиции (по умолчанию 1 сек).
    
# 269 -273 строчки кода отвечают за минимальный импульс. При тестировании на реальном источнике - изменить минимальное значение.
# Подключение скрипта к компьютеру
  1. Файл main.py
  2. Скачать python. Развернуть виртуальное окружение. Скачать в него требуемые библиотеки.
  3. Подключить устройство к COM порту компьютера.
  4. Запустить скрипт main.py на ПК.
  5. Включить устройство.
  6. В результате в терминале на ПК должно быть сообщение "COM порт найден".
  7. Данные сохраняются в csv файл в той же папке, что и main.py.
  8. Имя файла нужно задавать в ручную!!! Если csv файл уже существует, то он перезапишется. 



<img src="https://github.com/StepanKatin/flowcouner/blob/main/flowcounterelsch.jpg"/></h2>
